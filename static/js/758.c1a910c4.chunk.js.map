{"version":3,"file":"static/js/758.c1a910c4.chunk.js","mappings":"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","sources":["webpack://fly-on-the-wall/./src/components/posters/posters.module.scss?b9d6","components/posters/index.tsx","../node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"poster\":\"posters_poster__FNnd3\"};","import { CSSProperties, FC, useEffect, useState } from \"react\"\r\nimport { useAppContext } from \"../../hooks\"\r\nimport styles from \"./posters.module.scss\"\r\ninterface Poster {\r\n  src: string\r\n  top: number\r\n  left: number\r\n  rotation: number\r\n}\r\n\r\nconst types = {\r\n  scroll: \"scroll\",\r\n  resize: \"resize\",\r\n}\r\n\r\nexport const defaultPosters = [\r\n  {\r\n    src: require(\"./poster1.png\"),\r\n    top: 4000,\r\n    left: 4000,\r\n    rotation: -1,\r\n  },\r\n  {\r\n    src: require(\"./poster2.png\"),\r\n    top: 6000,\r\n    left: 6000,\r\n    rotation: 3,\r\n  },\r\n  {\r\n    src: require(\"./poster3.png\"),\r\n    top: 1000,\r\n    left: 1000,\r\n    rotation: 1,\r\n  },\r\n  {\r\n    src: require(\"./poster4.png\"),\r\n    top: 8000,\r\n    left: 2000,\r\n    rotation: -2,\r\n  },\r\n]\r\n\r\nconst Posters: FC = () => {\r\n  const [, dispatch] = useAppContext()\r\n  const [posters, setPosters] = useState<Poster[]>(defaultPosters)\r\n  const [{ width, height }, setWindowSize] = useState<{\r\n    width: number\r\n    height: number\r\n  }>({ width: 0, height: 0 })\r\n\r\n  const hoverPoster = (top: number, left: number): boolean => {\r\n    const { scrollX, scrollY } = window\r\n    const x = scrollX + width\r\n    const y = scrollY + height\r\n    const rangeX = x > left && x < left + 560\r\n    const rangeY = y > top && y < top + 560\r\n\r\n    return rangeX && rangeY\r\n  }\r\n\r\n  const scrollHandler = (): void => {\r\n    for (const poster of posters) {\r\n      const { top, left } = poster\r\n      const hover = hoverPoster(top, left)\r\n\r\n      if (hover) {\r\n        const clone = [...posters]\r\n        const index = clone.indexOf(poster)\r\n        clone.splice(index, 1)\r\n\r\n        if (!clone.length) {\r\n          dispatch({ level: 2 })\r\n        } else {\r\n          setPosters(clone)\r\n        }\r\n\r\n        break\r\n      }\r\n    }\r\n  }\r\n\r\n  const resizeHandler = () => {\r\n    const { innerHeight, innerWidth } = window\r\n\r\n    setWindowSize({ width: innerWidth / 2, height: innerHeight / 2 })\r\n  }\r\n\r\n  useEffect(() => {\r\n    resizeHandler()\r\n\r\n    const { scroll, resize } = types\r\n    window.addEventListener(scroll, scrollHandler, { passive: false })\r\n    window.addEventListener(resize, resizeHandler, { passive: false })\r\n\r\n    return () => {\r\n      window.removeEventListener(scroll, scrollHandler)\r\n      window.removeEventListener(resize, resizeHandler)\r\n    }\r\n  })\r\n\r\n  return (\r\n    <>\r\n      <h1\r\n        style={{\r\n          zIndex: 9999,\r\n          position: \"fixed\",\r\n          top: 0,\r\n          left: 0,\r\n          color: \"white\",\r\n          fontSize: 100,\r\n        }}\r\n      >\r\n        Find the posters: {posters.length}\r\n      </h1>\r\n      {posters?.map(({ src, top, left, rotation }: Poster) => {\r\n        const style: CSSProperties = {\r\n          top,\r\n          left,\r\n          transform: `rotate(${rotation}deg)`,\r\n        }\r\n\r\n        return (\r\n          <img\r\n            key={src}\r\n            src={src}\r\n            alt=\"Poster\"\r\n            className={styles.poster}\r\n            style={style}\r\n          />\r\n        )\r\n      })}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Posters\r\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"];\n\n  if (!it) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = it.call(o);\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}"],"names":["types","defaultPosters","src","require","top","left","rotation","useAppContext","dispatch","useState","posters","setPosters","width","height","setWindowSize","hoverPoster","window","scrollX","scrollY","x","y","scrollHandler","o","allowArrayLike","it","Symbol","iterator","Array","isArray","unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","call","step","next","_e2","poster","clone","index","indexOf","splice","level","resizeHandler","innerHeight","innerWidth","useEffect","scroll","resize","addEventListener","passive","removeEventListener","style","zIndex","position","color","fontSize","map","transform","alt","className","styles"],"sourceRoot":""}